local Library = {}

function Library:Create(xHubName, xThemeList)
	local xHubName = xHubName or "UI Library"
	local xThemeList = xThemeList or "Dark"

	-- Instances:
	local ScreenScript = Instance.new("ScreenGui")
	local Main = Instance.new("Frame")
	local Headerframe = Instance.new("Frame")
	local Close = Instance.new("ImageButton")
	local UICorner = Instance.new("UICorner")
	local ImageLabel = Instance.new("ImageLabel")
	local UIScale = Instance.new("UIScale")
	local Title = Instance.new("TextButton")
	local UIPadding = Instance.new("UIPadding")
	local FirstSeperator = Instance.new("Frame")
	local Siderframe = Instance.new("Frame")
	local ActualSide = Instance.new("ScrollingFrame")
	local ActualSideListLayout = Instance.new("UIListLayout")
	local Tabholder = Instance.new("ScrollingFrame")
	local Tabs = Instance.new("Folder")
	local UICorner_2 = Instance.new("UICorner")
	local UICorner_3 = Instance.new("UICorner")
	local TabLayout = Instance.new("UIListLayout")
	local ImageButtonK = Instance.new("ImageButton")
	local ImageButtonKCorner = Instance.new("UICorner")

	-- Properties:
	ScreenScript.Name = "ScreenScript"
	ScreenScript.Parent = game.Players.LocalPlayer:WaitForChild("PlayerGui")
	ScreenScript.ZIndexBehavior = Enum.ZIndexBehavior.Sibling

	Main.Name = "Main"
	Main.Parent = ScreenScript
	Main.BackgroundColor3 = Color3.fromRGB(29, 29, 29)
	Main.BorderColor3 = Color3.fromRGB(27, 42, 53)
	Main.BorderSizePixel = 0
	Main.Position = UDim2.new(0.272804052, 0, 0.243107766, 0)
	Main.Size = UDim2.new(0, 525, 0, 318)

	Headerframe.Name = "Headerframe"
	Headerframe.Parent = Main
	Headerframe.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
	Headerframe.BackgroundTransparency = 1.000
	Headerframe.BorderColor3 = Color3.fromRGB(0, 0, 0)
	Headerframe.BorderSizePixel = 0
	Headerframe.Size = UDim2.new(0, 525, 0, 37)

	Close.Name = "Close"
	Close.Parent = Headerframe
	Close.Active = false
	Close.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
	Close.BackgroundTransparency = 1.000
	Close.Position = UDim2.new(0.917412579, 0, 0.167417377, 0)
	Close.Selectable = false
	Close.Size = UDim2.new(0, 33, 0, 22)
	Close.Image = "rbxassetid://7743878857"
	Close.MouseButton1Click:Connect(function()
		ScreenScript:Destroy()
	end)

	UICorner.CornerRadius = UDim.new(0, 4)
	UICorner.Parent = Close

	ImageLabel.Parent = Close
	ImageLabel.AnchorPoint = Vector2.new(0.5, 0.5)
	ImageLabel.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
	ImageLabel.BackgroundTransparency = 1.000
	ImageLabel.Position = UDim2.new(0.500000775, 1, 0.545454264, 0)
	ImageLabel.Size = UDim2.new(0, 21, 0, 21)
	ImageLabel.Image = "rbxassetid://7743878857"

	UIScale.Parent = ImageLabel
	UIScale.Scale = 0.700

	Title.Name = "Title"
	Title.Parent = Headerframe
	Title.Active = false
	Title.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
	Title.BackgroundTransparency = 1.000
	Title.Position = UDim2.new(0.00192685076, 0, 0, 0)
	Title.Selectable = false
	Title.Size = UDim2.new(0, 323, 0, 36)
	Title.Font = Enum.Font.GothamMedium
	Title.Text = xHubName
	Title.TextColor3 = Color3.fromRGB(161, 161, 161)
	Title.TextScaled = true
	Title.TextSize = 13.000
	Title.TextWrapped = true
	Title.TextXAlignment = Enum.TextXAlignment.Left

	UIPadding.Parent = Title
	UIPadding.PaddingLeft = UDim.new(0, 10)

	FirstSeperator.Name = "FirstSeperator"
	FirstSeperator.Parent = Main
	FirstSeperator.BackgroundColor3 = Color3.fromRGB(52, 52, 52)
	FirstSeperator.BorderSizePixel = 0
	FirstSeperator.Position = UDim2.new(-2.58091513e-05, 0, 0.116352201, 0)
	FirstSeperator.Size = UDim2.new(0, 525, 0, 1)
	FirstSeperator.ZIndex = 5

	Siderframe.Name = "Siderframe"
	Siderframe.Parent = Main
	Siderframe.BackgroundColor3 = Color3.fromRGB(29, 29, 29)
	Siderframe.BorderColor3 = Color3.fromRGB(0, 0, 0)
	Siderframe.BorderSizePixel = 0
	Siderframe.Position = UDim2.new(-0.00190476188, 0, 0.119496852, 0)
	Siderframe.Size = UDim2.new(0, 199, 0, 280)

	ActualSide.Name = "ActualSide"
	ActualSide.Parent = Siderframe
	ActualSide.Active = true
	ActualSide.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
	ActualSide.BackgroundTransparency = .000
	ActualSide.BorderColor3 = Color3.fromRGB(0, 0, 0)
	ActualSide.BorderSizePixel = 0
	ActualSide.Size = UDim2.new(0, 198, 0, 239)
	ActualSide.ScrollBarThickness = 2

	ActualSideListLayout.Name = "ActualSideListLayout"
	ActualSideListLayout.Parent = ActualSide
	ActualSideListLayout.SortOrder = Enum.SortOrder.LayoutOrder

	UICorner_2.CornerRadius = UDim.new(0, 5)
	UICorner_2.Parent = Main

	Tabholder.Name = "Tabholder"
	Tabholder.Parent = Main
	Tabholder.Active = true
	Tabholder.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
	Tabholder.BackgroundTransparency = 1.000
	Tabholder.BorderColor3 = Color3.fromRGB(0, 0, 0)
	Tabholder.BorderSizePixel = 0
	Tabholder.Position = UDim2.new(0.375238091, 0, 0.119496852, 0)
	Tabholder.Size = UDim2.new(0, 327, 0, 280)
	Tabholder.ScrollBarThickness = 5

	Tabs.Name = "Tabs"
	Tabs.Parent = Tabholder

	UICorner_3.CornerRadius = UDim.new(0, 12)
	UICorner_3.Parent = Tabholder

	TabLayout.Name = "TabLayout"
	TabLayout.Parent = Tabholder
	TabLayout.SortOrder = Enum.SortOrder.LayoutOrder

	ImageButtonK.Name = "ImageButtonK"
	ImageButtonK.Parent = ScreenScript
	ImageButtonK.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
	ImageButtonK.BackgroundTransparency = 1.000
	ImageButtonK.BorderColor3 = Color3.fromRGB(0, 0, 0)
	ImageButtonK.BorderSizePixel = 0
	ImageButtonK.Position = UDim2.new(0.219957083, 0, 0.0619834736, 0)
	ImageButtonK.Size = UDim2.new(0, 73, 0, 52)
	ImageButtonK.Image = "rbxassetid://15771991482"

	ImageButtonKCorner.CornerRadius = UDim.new(0, 12)
	ImageButtonKCorner.Name = "ImageButtonKCorner"
	ImageButtonKCorner.Parent = ImageButtonK

	-- Define the xTabs table for tab management
	local xTabs = {}

	-- Define Elements for creating UI elements
	local Elements = {}

	-- Continued Create function
	function xTabs:Tab(Name, xVisible)
		local Name = Name or "Tab"
		local xVisible = xVisible or true

		local TabButton = Instance.new("TextButton")
		local TabUICorner = Instance.new("UICorner")
		
		TabButton.Name = "TabButton"
		TabButton.Parent = ActualSide
		TabButton.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
		TabButton.BackgroundTransparency = 1.000
		TabButton.Size = UDim2.new(0, 200, 0, 50)
		TabButton.Font = Enum.Font.SourceSans
		TabButton.Text = Name
		TabButton.TextColor3 = Color3.fromRGB(0, 255, 157)
		TabButton.TextScaled = true
		TabButton.TextSize = 14.000
		TabButton.TextWrapped = true

		TabUICorner.CornerRadius = UDim.new(0, 5)
		TabUICorner.Parent = TabButton
		
		
		TabButton.MouseButton1Down:Connect(function()
			-- Hide all content frames in Tabs except for this one
			for _, tab in pairs(ActualSide:GetChildren()) do
				if tab:IsA("TextButton") and tab.Name ~= Name then
					tab.Visible = false
				end
			end
			-- Show this tab's content
			Tabholder.Visible = true
		end)
		
		if xVisible then
			-- Ensure all other tabs are hidden initially
			for _, tab in pairs(ActualSide:GetChildren()) do
				if tab:IsA("TextButton") and tab.Name ~= Name then
					tab.Visible = false
					-- Also hide their content frames
					tab.Content.Visible = false
				end
			end
		else
			-- If xVisible is false, hide this tab and its content
			TabButton.Visible = false
			Tabholder.Visible = false
		end
		
		return TabButton
	end

	function Elements:Button(Name, Callback)
		local ButtonFunction = {}
		local Callback = Callback or function () end
		-- Instances:
		local Button = Instance.new("TextButton")
		local UICorner = Instance.new("UICorner")
		local TextLabel = Instance.new("TextLabel")
		local UIPadding = Instance.new("UIPadding")
		local Status = Instance.new("Frame")
		local ActualThing = Instance.new("Frame")
		local ImageLabel = Instance.new("ImageLabel")
		local UIScale = Instance.new("UIScale")

		-- Properties:

		-- Button properties
		Button.Name = "Button"
		Button.Parent = Tabholder
		Button.BackgroundColor3 = Color3.fromRGB(35, 35, 35)
		Button.Position = UDim2.new(0.5, -186, 0.5, -15)  -- Adjusted position to center within Tabholder
		Button.Size = UDim2.new(0, 373, 0, 31)
		Button.AutoButtonColor = false
		Button.Text = ""

		UICorner.CornerRadius = UDim.new(0, 5)
		UICorner.Parent = Button

		-- TextLabel properties
		TextLabel.Parent = Button
		TextLabel.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
		TextLabel.BackgroundTransparency = 1.000
		TextLabel.Position = UDim2.new(0, 10, 0, 0)  -- Adjusted position for padding
		TextLabel.Size = UDim2.new(0, 316, 0, 31)
		TextLabel.Font = Enum.Font.GothamMedium
		TextLabel.Text = Name
		TextLabel.TextColor3 = Color3.fromRGB(193, 193, 193)
		TextLabel.TextSize = 12.000
		TextLabel.TextXAlignment = Enum.TextXAlignment.Left

		UIPadding.Parent = TextLabel
		UIPadding.PaddingLeft = UDim.new(0, 10)

		-- Status properties
		Status.Name = "Status"
		Status.Parent = Button
		Status.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
		Status.BackgroundTransparency = 1.000
		Status.Position = UDim2.new(1, -37, 0, 0)  -- Adjusted position for status frame
		Status.Size = UDim2.new(0, 37, 0, 31)

		-- ActualThing properties
		ActualThing.Name = "ActualThing"
		ActualThing.Parent = Status
		ActualThing.AnchorPoint = Vector2.new(0.5, 0.5)
		ActualThing.BackgroundColor3 = Color3.fromRGB(106, 0, 255)
		ActualThing.BackgroundTransparency = 1.000
		ActualThing.Position = UDim2.new(0.5, 0, 0.5, 0)
		ActualThing.Size = UDim2.new(0, 20, 0, 20)

		-- ImageLabel properties
		ImageLabel.Parent = ActualThing
		ImageLabel.AnchorPoint = Vector2.new(0.5, 0.5)
		ImageLabel.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
		ImageLabel.BackgroundTransparency = 1.000
		ImageLabel.Position = UDim2.new(0.5, 0, 0.5, 0)
		ImageLabel.Size = UDim2.new(0, 20, 0, 20)
		ImageLabel.Image = "rbxassetid://7734010488"
		ImageLabel.ImageColor3 = Color3.fromRGB(104, 104, 104)

		-- UIScale properties
		UIScale.Parent = ImageLabel
		UIScale.Scale = 0.800


		

		-- Play sound effect (replace with your sound ID)
		local sound = Instance.new("Sound")
		sound.SoundId = "rbxassetid://8816939097" -- Replace with your sound ID
		sound.Parent = Button

		-- Event handling
		Button.MouseButton1Down:Connect(function()
			sound:Play()
			pcall(Callback)
		end)
		
		Button.MouseEnter:Connect(function()
			game:GetService("TweenService"):Create(Button, TweenInfo.new(0.1, Enum.EasingStyle.Linear, Enum.EasingDirection.In), {
				BackgroundColor3 = Color3.fromRGB(48, 51, 70)
			}):Play()
		end)
		Button.MouseLeave:Connect(function()
			game:GetService("TweenService"):Create(Button, TweenInfo.new(0.1, Enum.EasingStyle.Linear, Enum.EasingDirection.In), {
				BackgroundColor3 = Color3.fromRGB(40, 42, 60)
			}):Play()
		end)
		
		
		-- Function to update button properties
		function ButtonFunction:UpdateButton(newName)
			Button.Text = newName
			TextLabel.Text = newName
		end

		return ButtonFunction
	end
	
	
	
	
	
	
	
	
	
	
	
	
	-- Return the created instances and functions
	return {
		ScreenScript = ScreenScript,
		Main = Main,
		Headerframe = Headerframe,
		Close = Close,
		UICorner = UICorner,
		ImageLabel = ImageLabel,
		UIScale = UIScale,
		Title = Title,
		UIPadding = UIPadding,
		FirstSeperator = FirstSeperator,
		Siderframe = Siderframe,
		ActualSide = ActualSide,
		ActualSideListLayout = ActualSideListLayout,
		Tabholder = Tabholder,
		Tabs = Tabs,
		UICorner_2 = UICorner_2,
		UICorner_3 = UICorner_3,
		TabLayout = TabLayout,
		ImageButtonK = ImageButtonK,
		ImageButtonKCorner = ImageButtonKCorner,
		xTabs = xTabs,
		Elements = Elements
	}
end

-- Return the Library table as a callable function
return setmetatable(Library, {
	__call = function(_, ...)
		return Library.Create(...)
	end
})
