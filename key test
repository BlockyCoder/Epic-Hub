local Library = {}
local HttpService = game:GetService("HttpService")

-- Hash function using SHA-256
local function hashString(input)
    return HttpService:GenerateGUID(false):sub(1, 6) .. HttpService:GenerateGUID(false):sub(1, 6)
end

function Library:KeySystem(Name, ValidKey, callback)
    -- Create a ScreenGui
    local screenGui = Instance.new("ScreenGui")
    screenGui.Parent = game.Players.LocalPlayer:WaitForChild("PlayerGui")

    -- Create UI Elements
    local frame = Instance.new("Frame")
    frame.Size = UDim2.new(0, 300, 0, 200)
    frame.Position = UDim2.new(0.5, -150, 0.5, -100)
    frame.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
    frame.Parent = screenGui

    local titleLabel = Instance.new("TextLabel")
    titleLabel.Size = UDim2.new(1, 0, 0.2, 0)
    titleLabel.Position = UDim2.new(0, 0, 0, 0)
    titleLabel.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
    titleLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
    titleLabel.Text = Name
    titleLabel.Font = Enum.Font.SourceSansBold
    titleLabel.TextSize = 24
    titleLabel.Parent = frame

    local textBox = Instance.new("TextBox")
    textBox.Size = UDim2.new(0.8, 0, 0.2, 0)
    textBox.Position = UDim2.new(0.1, 0, 0.4, 0)
    textBox.BackgroundColor3 = Color3.fromRGB(70, 70, 70)
    textBox.TextColor3 = Color3.fromRGB(255, 255, 255)
    textBox.PlaceholderText = "Enter Key"
    textBox.Font = Enum.Font.SourceSans
    textBox.TextSize = 18
    textBox.Parent = frame

    local submitButton = Instance.new("TextButton")
    submitButton.Size = UDim2.new(0.5, 0, 0.2, 0)
    submitButton.Position = UDim2.new(0.25, 0, 0.7, 0)
    submitButton.BackgroundColor3 = Color3.fromRGB(100, 100, 100)
    submitButton.TextColor3 = Color3.fromRGB(255, 255, 255)
    submitButton.Text = "Submit"
    submitButton.Font = Enum.Font.SourceSansBold
    submitButton.TextSize = 18
    submitButton.Parent = frame

    local messageLabel = Instance.new("TextLabel")
    messageLabel.Size = UDim2.new(1, 0, 0.2, 0)
    messageLabel.Position = UDim2.new(0, 0, 0.9, 0)
    messageLabel.BackgroundTransparency = 1
    messageLabel.TextColor3 = Color3.fromRGB(255, 0, 0)
    messageLabel.Text = ""
    messageLabel.Font = Enum.Font.SourceSans
    messageLabel.TextSize = 18
    messageLabel.Parent = frame

    -- Event Listener for Button
    submitButton.MouseButton1Click:Connect(function()
        local userInput = textBox.Text
        local hashedInput = hashString(userInput)
        local validHash = hashString(ValidKey)

        if hashedInput == validHash then
            messageLabel.TextColor3 = Color3.fromRGB(0, 255, 0)
            messageLabel.Text = "Key Accepted!"
            callback(true)
        else
            messageLabel.TextColor3 = Color3.fromRGB(255, 0, 0)
            messageLabel.Text = "Invalid Key!"
            callback(false)
        end
    end)
end

return Library
